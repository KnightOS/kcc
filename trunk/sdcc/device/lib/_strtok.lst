                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : FreeWare ANSI-C Compiler
                              3 ; Version 2.1.9Ga Sun Jan 16 17:31:34 2000
                              4 
                              5 ;--------------------------------------------------------
                              6 	.module _strtok
                              7 ;--------------------------------------------------------
                              8 ; publics variables in this module
                              9 ;--------------------------------------------------------
                             10 	.globl _strtok_PARM_2
                             11 	.globl _strtok
                             12 ;--------------------------------------------------------
                             13 ; special function registers
                             14 ;--------------------------------------------------------
                             15 ;--------------------------------------------------------
                             16 ; special function bits 
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; internal ram data
                             20 ;--------------------------------------------------------
                             21 	.area	DSEG    (DATA)
                             22 ;--------------------------------------------------------
                             23 ; overlayable items in internal ram 
                             24 ;--------------------------------------------------------
                             25 	.area	OSEG	(OVR,DATA)
                             26 ;--------------------------------------------------------
                             27 ; indirectly addressable internal ram data
                             28 ;--------------------------------------------------------
                             29 	.area	ISEG    (DATA)
                             30 ;--------------------------------------------------------
                             31 ; bit data
                             32 ;--------------------------------------------------------
                             33 	.area	BSEG    (BIT)
                             34 ;--------------------------------------------------------
                             35 ; external ram data
                             36 ;--------------------------------------------------------
                             37 	.area	XSEG    (XDATA)
   0000                      38 _strtok_PARM_2:
   0000                      39 	.ds	0x0003
   0003                      40 _strtok_str_1_1:
   0003                      41 	.ds	0x0003
   0006                      42 _strtok_s_1_1:
   0006                      43 	.ds	0x0003
                             44 ;--------------------------------------------------------
                             45 ; global & static initialisations
                             46 ;--------------------------------------------------------
                             47 	.area GSINIT (CODE)
                             48 ;--------------------------------------------------------
                             49 ; code
                             50 ;--------------------------------------------------------
                             51 	.area CSEG (CODE)
                    0000     52 	G$strtok$0$0 ==.
                             53 ;	_strtok.c 32
                             54 ;	-----------------------------------------
                             55 ;	 function strtok
                             56 ;	-----------------------------------------
   0000                      57 _strtok:
                    0002     58 	ar2 = 0x02
                    0003     59 	ar3 = 0x03
                    0004     60 	ar4 = 0x04
                    0005     61 	ar5 = 0x05
                    0006     62 	ar6 = 0x06
                    0007     63 	ar7 = 0x07
                    0000     64 	ar0 = 0x00
                    0001     65 	ar1 = 0x01
                             66 ;	_strtok.c 0
   0000 C0 F0                67 	push	b
   0002 C0 83                68 	push	dph
   0004 C0 82                69 	push	dpl
   0006 90s00r03             70 	mov	dptr,#_strtok_str_1_1
   0009 D0 E0                71 	pop	acc
   000B F0                   72 	movx	@dptr,a
   000C D0 E0                73 	pop	acc
   000E A3                   74 	inc	dptr
   000F F0                   75 	movx	@dptr,a
   0010 D0 E0                76 	pop	acc
   0012 A3                   77 	inc	dptr
   0013 F0                   78 	movx	@dptr,a
                             79 ;	_strtok.c 40
   0014 90s00r03             80 	mov	dptr,#_strtok_str_1_1
   0017 E0                   81 	movx	a,@dptr
   0018 FA                   82 	mov	r2,a
   0019 A3                   83 	inc	dptr
   001A E0                   84 	movx	a,@dptr
   001B FB                   85 	mov	r3,a
   001C A3                   86 	inc	dptr
   001D E0                   87 	movx	a,@dptr
   001E FC                   88 	mov	r4,a
   001F EA                   89 	mov	a,r2
   0020 4B                   90 	orl	a,r3
   0021 4C                   91 	orl	a,r4
                             92 ; Peephole 110   removed ljmp by inverse jump logic
   0022 60 0B                93 	jz  00102$
   0024                      94 00114$:
                             95 ;	_strtok.c 41
   0024 90s00r06             96 	mov	dptr,#_strtok_s_1_1
   0027 EA                   97 	mov	a,r2
   0028 F0                   98 	movx	@dptr,a
   0029 A3                   99 	inc	dptr
   002A EB                  100 	mov	a,r3
   002B F0                  101 	movx	@dptr,a
   002C A3                  102 	inc	dptr
   002D EC                  103 	mov	a,r4
   002E F0                  104 	movx	@dptr,a
   002F                     105 00102$:
                            106 ;	_strtok.c 43
   002F 90s00r06            107 	mov	dptr,#_strtok_s_1_1
   0032 E0                  108 	movx	a,@dptr
   0033 FA                  109 	mov	r2,a
   0034 A3                  110 	inc	dptr
   0035 E0                  111 	movx	a,@dptr
   0036 FB                  112 	mov	r3,a
   0037 A3                  113 	inc	dptr
   0038 E0                  114 	movx	a,@dptr
   0039 FC                  115 	mov	r4,a
                            116 ;	_strtok.c 45
   003A                     117 00105$:
   003A 90s00r06            118 	mov	dptr,#_strtok_s_1_1
   003D E0                  119 	movx	a,@dptr
   003E FD                  120 	mov	r5,a
   003F A3                  121 	inc	dptr
   0040 E0                  122 	movx	a,@dptr
   0041 FE                  123 	mov	r6,a
   0042 A3                  124 	inc	dptr
   0043 E0                  125 	movx	a,@dptr
   0044 FF                  126 	mov	r7,a
   0045 8D 82               127 	mov	dpl,r5
   0047 8E 83               128 	mov	dph,r6
   0049 8F F0               129 	mov	b,r7
   004B 12s00r00            130 	lcall	__gptrget
                            131 ; Peephole 105   removed redundant mov
   004E F8                  132 	mov  r0,a
   004F 70 03               133 	jnz	00115$
   0051 02s00rC1            134 	ljmp	00107$
   0054                     135 00115$:
                            136 ;	_strtok.c 46
   0054 C0 02               137 	push	ar2
   0056 C0 03               138 	push	ar3
   0058 C0 04               139 	push	ar4
   005A 90s00r00            140 	mov	dptr,#_strtok_PARM_2
   005D E0                  141 	movx	a,@dptr
   005E F9                  142 	mov	r1,a
   005F A3                  143 	inc	dptr
   0060 E0                  144 	movx	a,@dptr
   0061 FA                  145 	mov	r2,a
   0062 A3                  146 	inc	dptr
   0063 E0                  147 	movx	a,@dptr
   0064 FB                  148 	mov	r3,a
   0065 90s00r00            149 	mov	dptr,#_strchr_PARM_2
   0068 E8                  150 	mov	a,r0
   0069 F0                  151 	movx	@dptr,a
   006A C0 05               152 	push	ar5
   006C C0 06               153 	push	ar6
   006E C0 07               154 	push	ar7
   0070 89 82               155 	mov	dpl,r1
   0072 8A 83               156 	mov	dph,r2
   0074 8B F0               157 	mov	b,r3
   0076 12s00r00            158 	lcall	_strchr
   0079 AA 82               159 	mov	r2,dpl
   007B AB 83               160 	mov	r3,dph
   007D AC F0               161 	mov	r4,b
   007F D0 07               162 	pop	ar7
   0081 D0 06               163 	pop	ar6
   0083 D0 05               164 	pop	ar5
   0085 EA                  165 	mov	a,r2
   0086 4B                  166 	orl	a,r3
   0087 4C                  167 	orl	a,r4
   0088 D0 04               168 	pop	ar4
   008A D0 03               169 	pop	ar3
   008C D0 02               170 	pop	ar2
                            171 ; Peephole 110   removed ljmp by inverse jump logic
   008E 60 20               172 	jz  00104$
   0090                     173 00116$:
                            174 ;	_strtok.c 47
   0090 90s00r06            175 	mov	dptr,#_strtok_s_1_1
   0093 74 01               176 	mov	a,#0x01
   0095 2D                  177 	add	a,r5
   0096 F0                  178 	movx	@dptr,a
                            179 ; Peephole 180   changed mov to clr
   0097 E4                  180 	clr  a
   0098 3E                  181 	addc	a,r6
   0099 A3                  182 	inc	dptr
   009A F0                  183 	movx	@dptr,a
   009B A3                  184 	inc	dptr
   009C EF                  185 	mov	a,r7
   009D F0                  186 	movx	@dptr,a
   009E 8D 82               187 	mov	dpl,r5
   00A0 8E 83               188 	mov	dph,r6
   00A2 8F F0               189 	mov	b,r7
                            190 ; Peephole 180   changed mov to clr
   00A4 E4                  191 	clr  a
   00A5 12s00r00            192 	lcall	__gptrput
                            193 ;	_strtok.c 48
   00A8 8A 82               194 	mov	dpl,r2
   00AA 8B 83               195 	mov	dph,r3
   00AC 8C F0               196 	mov	b,r4
                            197 ; Peephole 132   changed ljmp to sjmp
   00AE 80 17               198 	sjmp 00108$
   00B0                     199 00104$:
                            200 ;	_strtok.c 50
   00B0 90s00r06            201 	mov	dptr,#_strtok_s_1_1
   00B3 74 01               202 	mov	a,#0x01
   00B5 2D                  203 	add	a,r5
   00B6 F0                  204 	movx	@dptr,a
                            205 ; Peephole 180   changed mov to clr
   00B7 E4                  206 	clr  a
   00B8 3E                  207 	addc	a,r6
   00B9 A3                  208 	inc	dptr
   00BA F0                  209 	movx	@dptr,a
   00BB A3                  210 	inc	dptr
   00BC EF                  211 	mov	a,r7
   00BD F0                  212 	movx	@dptr,a
   00BE 02s00r3A            213 	ljmp	00105$
   00C1                     214 00107$:
                            215 ;	_strtok.c 52
                            216 ; Peephole 181   used 16 bit load of dptr
   00C1 90 00 00            217 	mov  dptr,#0x0000
   00C4 75 F0 00            218 	mov	b,#0x00
   00C7                     219 00108$:
                    00C7    220 	C$_strtok.c$53$1$1 ==.
                    00C7    221 	XG$strtok$0$0 ==.
   00C7 22                  222 	ret
                            223 	.area	CSEG    (CODE)
